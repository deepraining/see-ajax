import e from"json-refactor";import o from"reqwest";var n={optionsCollection:{},env:0};var t={debug:!0},r=function(e){for(var o=[],n=arguments.length-1;n-- >0;)o[n]=arguments[n+1];console.info.apply(console,["see-ajax: "+e].concat(o))},s=function(e){for(var o=[],n=arguments.length-1;n-- >0;)o[n]=arguments[n+1];console.error.apply(console,["see-ajax: "+e].concat(o))};function i(o,t,r){var s=n.optionsCollection[r],i=n.optionsCollection.common||{},a=n.env,c=s.responseRefactor&&s.responseRefactor[a],f=i.responseRefactor&&i.responseRefactor[a],l=s.postHandle&&s.postHandle[a],p=i.postHandle&&i.postHandle[a],u=o;if(f&&e(u,f),c&&e(u,c),p){var d=p(u,t,r);d&&(u=d)}if(l){var m=l(u,t,r);m&&(u=m)}return u}function a(e,a,c,f){if(e){var l=n.optionsCollection[e],p=n.optionsCollection.common||{};if(l){var u=n.env,d=l.method&&l.method[u]||"get",m=l.stringify&&l.stringify[u]||!1,v=l.settings&&l.settings[u]||{},g=l.url&&l.url[u]||"",y=l.requestKeys&&l.requestKeys[u]||{},h=l.preHandle&&l.preHandle[u],j=p.preHandle&&p.preHandle[u],C=l.implement&&l.implement[u],H=Object.assign({},a||{});if(Object.keys(H).forEach(function(e){var o=y[e];o&&"string"==typeof o&&(H[o]=H[e],delete H[e])}),j){var E=j(H);E&&(H=E)}if(h){var b=h(H);b&&(H=b)}C?C(function(o){t.debug&&(r("custom ajax implement for '"+e+"', and request params is:",H),r("result for '"+e+"' is:",o)),c(i(o,H,e))},H):(v.url=g,v.method=d,v.data=m?JSON.stringify(H):H,v.type="json","get"!==d&&"GET"!==d&&"head"!==d&&"HEAD"!==d&&(v.headers||(v.headers={}),v.headers["Content-Type"]||(v.headers["Content-Type"]=m?"application/json":"application/x-www-form-urlencoded;charset=UTF-8")),v.success=function(o){c&&c(i(o,H,e))},v.error=function(e){f&&f(e)},o(v))}else s("name '"+e+"' is not configured.")}}a.config=function(e,o){"string"==typeof e?n.optionsCollection[e]=o:Object.keys(e).forEach(function(o){n.optionsCollection[o]=e[o]})},a.setEnv=function(e){n.env=e},a.getEnv=function(){return n.env},a.set=function(e){e&&Object.keys(e).forEach(function(o){t[o]=e[o]})};export default a;
//# sourceMappingURL=see-ajax.m.js.map
