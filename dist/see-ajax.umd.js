!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("json-refactor"),require("reqwest")):"function"==typeof define&&define.amd?define(["json-refactor","reqwest"],n):e.seeAjax=n(e.JSONRefactor,e.reqwest)}(this,function(e,n){e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var o={optionsCollection:{},env:0};var t={debug:!0},r=function(e){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];console.info.apply(console,["see-ajax: "+e].concat(n))},s=function(e){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];console.error.apply(console,["see-ajax: "+e].concat(n))};function i(n,t,r){var s=o.optionsCollection[r],i=o.optionsCollection.common||{},a=o.env,c=s.responseRefactor&&s.responseRefactor[a],f=i.responseRefactor&&i.responseRefactor[a],l=s.postHandle&&s.postHandle[a],p=i.postHandle&&i.postHandle[a],u=n;if(f&&e(u,f),c&&e(u,c),p){var d=p(u,t,r);d&&(u=d)}if(l){var m=l(u,t,r);m&&(u=m)}return u}function a(e,a,c,f){if(e){var l=o.optionsCollection[e],p=o.optionsCollection.common||{};if(l){var u=o.env,d=l.method&&l.method[u]||"get",m=l.stringify&&l.stringify[u]||!1,y=l.settings&&l.settings[u]||{},v=l.url&&l.url[u]||"",g=l.requestKeys&&l.requestKeys[u]||{},h=l.preHandle&&l.preHandle[u],j=p.preHandle&&p.preHandle[u],C=l.implement&&l.implement[u],H=Object.assign({},a||{});if(Object.keys(H).forEach(function(e){var n=g[e];n&&"string"==typeof n&&(H[n]=H[e],delete H[e])}),j){var q=j(H);q&&(H=q)}if(h){var w=h(H);w&&(H=w)}C?C(function(n){t.debug&&(r("custom ajax implement for '"+e+"', and request params is:",H),r("result for '"+e+"' is:",n)),c(i(n,H,e))},H):(y.url=v,y.method=d,y.data=m?JSON.stringify(H):H,y.type="json","get"!==d&&"GET"!==d&&"head"!==d&&"HEAD"!==d&&(y.headers||(y.headers={}),y.headers["Content-Type"]||(y.headers["Content-Type"]=m?"application/json":"application/x-www-form-urlencoded;charset=UTF-8")),y.success=function(n){c&&c(i(n,H,e))},y.error=function(e){f&&f(e)},n(y))}else s("name '"+e+"' is not configured.")}}return a.config=function(e,n){"string"==typeof e?o.optionsCollection[e]=n:Object.keys(e).forEach(function(n){o.optionsCollection[n]=e[n]})},a.setEnv=function(e){o.env=e},a.getEnv=function(){return o.env},a.set=function(e){e&&Object.keys(e).forEach(function(n){t[n]=e[n]})},a});
//# sourceMappingURL=see-ajax.umd.js.map
