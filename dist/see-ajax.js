function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var n=e(require("json-refactor")),o=e(require("reqwest")),t={optionsCollection:{},env:0};var r={debug:!0},s=function(e){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];console.info.apply(console,["see-ajax: "+e].concat(n))},i=function(e){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];console.error.apply(console,["see-ajax: "+e].concat(n))};function a(e,o,r){var s=t.optionsCollection[r],i=t.optionsCollection.common||{},a=t.env,c=s.responseRefactor&&s.responseRefactor[a],f=i.responseRefactor&&i.responseRefactor[a],l=s.postHandle&&s.postHandle[a],p=i.postHandle&&i.postHandle[a],u=e;if(f&&n(u,f),c&&n(u,c),p){var d=p(u,o,r);d&&(u=d)}if(l){var v=l(u,o,r);v&&(u=v)}return u}function c(e,n,c,f){if(e){var l=t.optionsCollection[e],p=t.optionsCollection.common||{};if(l){var u=t.env,d=l.method&&l.method[u]||"get",v=l.stringify&&l.stringify[u]||!1,m=l.settings&&l.settings[u]||{},g=l.url&&l.url[u]||"",y=l.requestKeys&&l.requestKeys[u]||{},h=l.preHandle&&l.preHandle[u],j=p.preHandle&&p.preHandle[u],C=l.implement&&l.implement[u],H=Object.assign({},n||{});if(Object.keys(H).forEach(function(e){var n=y[e];n&&"string"==typeof n&&(H[n]=H[e],delete H[e])}),j){var b=j(H);b&&(H=b)}if(h){var E=h(H);E&&(H=E)}C?C(function(n){r.debug&&(s("custom ajax implement for '"+e+"', and request params is:",H),s("result for '"+e+"' is:",n)),c(a(n,H,e))},H):(m.url=g,m.method=d,m.data=v?JSON.stringify(H):H,m.type="json","get"!==d&&"GET"!==d&&"head"!==d&&"HEAD"!==d&&(m.headers||(m.headers={}),m.headers["Content-Type"]||(m.headers["Content-Type"]=v?"application/json":"application/x-www-form-urlencoded;charset=UTF-8")),m.success=function(n){c&&c(a(n,H,e))},m.error=function(e){f&&f(e)},o(m))}else i("name '"+e+"' is not configured.")}}c.config=function(e,n){"string"==typeof e?t.optionsCollection[e]=n:Object.keys(e).forEach(function(n){t.optionsCollection[n]=e[n]})},c.setEnv=function(e){t.env=e},c.getEnv=function(){return t.env},c.set=function(e){e&&Object.keys(e).forEach(function(n){r[n]=e[n]})},module.exports=c;
//# sourceMappingURL=see-ajax.js.map
