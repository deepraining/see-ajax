if(function(e){function n(e){return e}function r(){var e=arguments[0];if("undefined"==typeof e||null===e)return{};if("object"!=typeof e)return e;var n,t=arguments[1],i=!0;t instanceof Array||(t=e,i=!1);var a,f={};for(a in t)n=i?t[a]:a,e.hasOwnProperty(n)&&(e[n]instanceof Array?f[n]=o(e[n]):"object"==typeof e[n]?f[n]=r(e[n]):f[n]=e[n]);return f}function o(e){if("undefined"==typeof e||null===e)return[];if(!(e instanceof Array))return[];var n=[];return e.map(function(e,o){"object"!=typeof e?n[o]=e:n[o]=r(e)}),n}function t(n,r){switch(r){case"int":return parseInt(n);case"float":return parseFloat(n);case"bool":return!!n;case"string":return n+"";default:return e[r]&&"function"==typeof e[r]?n=e[r](n):console.error(""+r+"：没有此内置操作，也无此全局函数"),n}}function i(e,n,i,a){var f,s=i.split("."),u=s.length,p=s[u-1],l=!!~p.indexOf("[]"),y=e,d=0;if(l)for(d=0;d<u-1;d++){if("undefined"==typeof y[s[d]]){f=void 0;break}y=y[s[d]],f=y}else for(d=0;d<u;d++){if("undefined"==typeof y[s[d]]){f=void 0;break}y=y[s[d]],f=y}"undefined"!=typeof f&&(l?e[n]=c(f,p):f&&"object"==typeof f?Array.isArray(f)?e[n]=o(f):e[n]=r(f):e[n]=a?t(f,a):f)}function a(e,n,r,o,i){var a=e[r];e[n]=o?t(a,o):a,n!=r&&!i&&delete e[r]}function f(e,n,r){e[n]=c(e,r)}function c(e,r){var o,t=r.split("|"),i=t[0].slice(0,-2),a=t[1],f=t[2],c=t[3],s=t[4],u=!!s,p=e[i],l=0,y=0,d=0,m=0,v=[];if(!p||!Array.isArray(p))return void console.error("配置的键 "+i+" 不存在，或者值不是数组");if(u)switch(s){case"round":o=Math.round;break;case"floor":o=Math.floor;break;case"ceil":o=Math.ceil;break;case"abs":o=Math.abs;break;default:o=n,"concat"!=f&&console.error("子操作 "+s+" 不存在")}switch(f){case"sum":return p.map(function(e){l+=u?o(e[a]):e[a]}),l;case"average":return p.map(function(e){l+=u?o(e[a]):e[a]}),y=l/p.length;case"max":return p.map(function(e,n){var r=u?o(e[a]):e[a];n?r>d&&(d=r):d=r}),d;case"min":return p.map(function(e,n){var r=u?o(e[a]):e[a];n?r<m&&(m=r):m=r}),m;case"concat":return p.map(function(e){var n=u?e[a][s]():e[a];v.push(n)}),v.join(c?c:"");default:return void console.error("操作 "+f+" 不存在")}}function s(e,n,r){var o=n[r],t=!!~o.indexOf("^"),c=t?o.slice(0,-1):o,s=c.split("!"),u=s[0],p=s[1],l=!!~u.indexOf("."),y=!l&&!!~u.indexOf("[]");l?u.split(".").length>1?i(e,r,u,p):console.error("配置键名 "+c+" 有误"):y?f(e,r,u):a(e,r,u,p,t)}function u(e,n){return e&&n&&"object"==typeof e&&"object"==typeof n?!(Array.isArray(n)&&!Array.isArray(e)||!Array.isArray(n)&&Array.isArray(e))||(console.error("target类型与map类型不匹配"),console.error("target: "+JSON.stringify(e)),console.error("map: "+JSON.stringify(n)),!1):(console.error("target与map必须是对象或数组"),console.error("target: "+JSON.stringify(e)),console.error("map: "+JSON.stringify(n)),!1)}function p(e,n){u(e,n)&&(Array.isArray(n)?e.map(function(e){p(e,n[0])}):Object.keys(n).map(function(r){var o,t;if(o=n[r],t="_"==r.slice(0,1)&&"undefined"==typeof e[r]?e[r.slice(1)]:e[r],"object"==typeof o){if(!u(t,o))return;Array.isArray(o)?t.map(function(e){u(e,o[0])&&p(e,o[0])}):p(t,o)}else"string"==typeof o?s(e,n,r):console.error("无法解析key: \n"+("string"==typeof o?o:"object"==typeof o?JSON.stringify(o):""))}))}var l=function(e,n,t){if(!e||"object"!=typeof e)return console.error("传入的source格式有误，请传入对象或数组"),i;if(!n||"object"!=typeof n)return console.error("传入的map格式有误，请传入对象或数组"),i;var i=t?Array.isArray(e)?o(e):r(e):e;return p(i,n),i};JSON.refactor=l}(this),"undefined"==typeof jQuery)throw new Error("jquery.seeAjax requires jQuery");!function(e){var n=!1,r={},o={};o.getFormatData=function(e,n){var o=r.name[e],t=r.environment,i={};return"undefined"==typeof t&&(console.info("环境变量 config.environment 没有配置, 默认取值为0的环境"),t=0),!o&&console.error("config.url中无 "+e+" 对应的值"),Array.isArray(n)?n.map(function(e,n){i[r.requestKeys[o][t][n]]=e}):Object.keys(n).map(function(e){i[r.requestKeys[o][t][e]]=n[e]}),[r.url[o][t],i]},o.preHandle=function(e,n){var o=r.name[n],t=r.environment,i=!!r.preHandle&&!!r.preHandle.common&&r.preHandle.common,a=!!r.preHandle&&!!r.preHandle[o]&&r.preHandle[o];"undefined"==typeof t&&(console.info("环境变量 config.environment 没有配置, 默认取值为0的环境"),t=0),!!i&&("function"==typeof i?!t&&i(e):!!i[t]&&i[t](e)),!!a&&("function"==typeof a?!t&&a(e):!!a[t]&&a[t](e))},o.postHandle=function(e,n){var o=r.name[n],t=r.environment,i=!!r.postHandle&&!!r.postHandle.common&&r.postHandle.common,a=!!r.postHandle&&!!r.postHandle[o]&&r.postHandle[o],f=!!r.responseRefactor&&!!r.responseRefactor.common&&r.responseRefactor.common,c=!!r.responseRefactor&&!!r.responseRefactor[o]&&r.responseRefactor[o];"undefined"==typeof t&&(console.info("环境变量 config.environment 没有配置, 默认取值为0的环境"),t=0),!!f&&(Array.isArray(f)?!!f[t]&&JSON.refactor(e,f[t]):!t&&JSON.refactor(e,f)),!!c&&(Array.isArray(c)?!!c[t]&&JSON.refactor(e,c[t]):!t&&JSON.refactor(e,c)),!!i&&("function"==typeof i?!t&&i(e):!!i[t]&&i[t](e)),!!a&&("function"==typeof a?!t&&a(e):!!a[t]&&a[t](e))},o.send=function(n,t,i,a,f,c,s){var u=o.getFormatData(t,i);!f&&(f="json"),o.preHandle(u[1],t);var p,l=r.name[t],y=r.environment;if("undefined"==typeof y&&(console.info("环境变量 config.environment 没有配置, 默认取值为0的环境"),y=0),l?r.realize&&r.realize[l]&&(p="function"==typeof r.realize[l]?typeof r.realize[l]:r.realize[l][y]?r.realize[l][y]:void 0):console.error("config.url中无 "+t+" 对应的值"),p){var d=c?JSON.stringify(u[1]):u[1];console.info('Custom realize function for "'+t+'", and request data is: '),console.info(d);var m=p(d);console.info("result is: "),console.info(m),o.postHandle(m,t),a(m)}else{var v=s||{};v.type=n,v.data=c?JSON.stringify(u[1]):u[1],v.dataType=f,v.success=function(e){o.postHandle(e,t),a(e)},e.ajax(u[0],v)}},o.get=function(e,n,r,t,i){"object"==typeof t&&(i=t,t=void 0),o.send("get",e,n,r,t,!1,i)},o.beyondGet=function(e,n,r,t,i,a,f){"boolean"==typeof i?"object"==typeof a?(f=a,a=i,i=void 0):(a=i,i=void 0):"object"==typeof i&&(f=i,i=void 0,a=void 0),o.send(e,n,r,t,i,a,f)},o.post=function(e,n,r,t,i,a){o.beyondGet("post",e,n,r,t,i,a)},o.put=function(e,n,r,t,i,a){o.beyondGet("put",e,n,r,t,i,a)},o["delete"]=function(e,n,r,t,i,a){o.beyondGet("delete",e,n,r,t,i,a)},o.getEnv=function(){return r.environment?r.environment:0},o.config=function(o){n?e.extend(!0,r,o):(n=!0,r=o)},e.seeAjax=o}(jQuery);